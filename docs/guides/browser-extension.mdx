---
title: "Browser Extension"
description: "Connect Actionbook to your existing Chrome browser"
---

Use your existing Chrome browser — with all your login sessions, extensions, and bookmarks — for Actionbook automation.

## Overview

Actionbook supports three browser control modes:

| Mode | How It Works | Best For |
|------|-------------|----------|
| **Default (CDP)** | Launches a new browser instance | Clean environments, CI/CD, headless |
| **Extension** | Connects to your running Chrome | Preserving login sessions, existing tabs |
| **Extension (Isolated)** | Launches a dedicated Chrome with the extension pre-loaded | AI agents, clean extension environment, no manual setup |

Extension mode is ideal when your automation needs access to pages that require authentication or session state from your real browser. Isolated mode gives the same extension-based control but in a separate Chrome instance — useful when you don't want to touch your main browser.

## Setup

<Steps>
  <Step title="Install the extension">
    Download and install the latest extension from GitHub:

    ```bash
    actionbook extension install
    ```

    This downloads the latest release from GitHub and installs it to `~/.config/actionbook/extension/`.

    <Tip>
      **Manual download alternative:** If the CLI install fails (e.g., GitHub rate limit), you can download the `.zip` directly from [GitHub Releases](https://github.com/actionbook/actionbook/releases), unzip it to a local folder, and load it manually.
    </Tip>
  </Step>

  <Step title="Load into Chrome">
    1. Open `chrome://extensions` in Chrome
    2. Enable **Developer mode** (top-right toggle)
    3. Click **Load unpacked**
    4. Select the extension directory:

    ```bash
    actionbook extension path
    ```
  </Step>

  <Step title="Start the bridge server">
    The bridge is the WebSocket relay between CLI and extension:

    ```bash
    actionbook extension serve
    ```

    To stop the bridge when you're done:

    ```bash
    actionbook extension stop
    ```

    <Note>
      `serve` runs in the foreground. You can stop it with Ctrl+C in the same terminal, or use `extension stop` from any other terminal.
    </Note>
  </Step>

  <Step title="Pair the extension">
    Native Messaging usually handles pairing automatically. If not:

    1. Click the Actionbook extension icon in Chrome toolbar
    2. Copy the token (`abk_...`) from the `serve` terminal output
    3. Paste it into the popup and click **Save**
  </Step>

  <Step title="Verify the connection">
    ```bash
    actionbook extension status
    actionbook extension ping
    ```

    You should see `running` and a latency measurement confirming the link is active.
  </Step>
</Steps>

## Isolated Mode

Isolated mode launches a **separate Chrome instance** with the extension automatically loaded — no manual "Load unpacked" or pairing required. It's the recommended mode for AI agents and automation scripts.

### How it differs from standard Extension mode

| | Standard Extension | Isolated Mode |
|---|---|---|
| Chrome instance | Your existing browser | Dedicated instance (separate profile) |
| Login sessions | Uses your real sessions | Fresh profile, no existing sessions |
| Extension loading | Manual "Load unpacked" | Automatic via CDP |
| Token pairing | Native Messaging or manual | Injected via CDP (zero config) |
| Setup steps | 5 steps (install → load → serve → pair → verify) | 1 command |

### Quick start

```bash
actionbook extension serve --isolated
```

This single command will:
1. Launch a dedicated Chrome with its own profile (`~/.local/share/actionbook/profiles/extension/`)
2. Automatically load the extension into Chrome via CDP
3. Inject the session token — no manual pairing needed
4. Start the bridge server

<Note>
  The extension must be installed first (`actionbook extension install`). Isolated mode uses the same extension files but loads them automatically.
</Note>

### Persistent config

Instead of passing `--isolated` every time, set it in your config file (`~/.config/actionbook/config.toml`):

```toml
[browser]
extension_isolated_profile = true
```

With this config, `actionbook extension serve` will always use isolated mode.

### Using browser commands

Once the isolated bridge is running, all `--extension` browser commands work the same way:

```bash
actionbook --extension browser open "https://example.com"
actionbook --extension browser click "#login-button"
actionbook --extension browser text
```

### When to use isolated mode

- **AI agents**: Zero-config setup, no human interaction needed for pairing
- **Clean environment**: Fresh Chrome profile without existing cookies or extensions interfering
- **Parallel automation**: Run isolated mode alongside your main Chrome without conflicts
- **CI/CD**: Reproducible browser environment for extension-based testing

### When to use standard Extension mode

- You need your **existing login sessions** (Gmail, GitHub, banking, etc.)
- You want to automate actions in your **current tabs**
- The task requires your browser's **stored passwords, cookies, or extensions**

## Usage

Add `--extension` to any `actionbook browser` command, or set the environment variable:

```bash
export ACTIONBOOK_EXTENSION=1
```

### Navigation

```bash
actionbook --extension browser open "https://example.com"
actionbook --extension browser goto "https://example.com/login"
actionbook --extension browser back
actionbook --extension browser forward
actionbook --extension browser reload
```

### Page Interaction

```bash
actionbook --extension browser click "button[type='submit']"
actionbook --extension browser fill "#username" "demo"
actionbook --extension browser select "#country" "US"
actionbook --extension browser hover ".menu-item"
actionbook --extension browser focus "#search-input"
actionbook --extension browser press "Enter"
actionbook --extension browser wait "#username" --timeout 10000
```

### Debug & Export

```bash
actionbook --extension browser screenshot output.png --full-page
actionbook --extension browser eval "document.title"
actionbook --extension browser snapshot
actionbook --extension browser html
actionbook --extension browser text
```

### Cookie Operations

```bash
actionbook --extension browser cookies list
actionbook --extension browser cookies get session_id
actionbook --extension browser cookies set demo_cookie hello
actionbook --extension browser cookies delete demo_cookie
actionbook --extension browser cookies clear --domain example.com --yes
```

### Tab Management

```bash
actionbook --extension browser pages
actionbook --extension browser switch tab:123456
```

## Recommended Workflow with Action Manuals

Combine action manuals with extension mode for the best results:

```bash
# 1. Find the action manual
actionbook search "github search repos"

# 2. Get verified selectors
actionbook get "<area_id>"

# 3. Execute in your browser (with your GitHub login session)
actionbook --extension browser open "https://github.com"
actionbook --extension browser fill "#query-builder-test" "actionbook"
actionbook --extension browser click "button[type='submit']"
```

## Shutdown

### Standard Extension mode

When you're done with extension mode, follow this cleanup order:

```bash
# 1. Release the debug connection (detaches from Chrome)
actionbook --extension browser close

# 2. Stop the bridge server
actionbook extension stop

# 3. (Optional) Verify
actionbook extension status    # should show "not running"
```

<Warning>
  Always release the debug connection **before** stopping the bridge. Skipping step 1 may leave Chrome showing an "Actionbook is debugging this browser" banner.
</Warning>

### Isolated mode

In isolated mode, stopping the bridge also terminates the dedicated Chrome instance:

```bash
# 1. Release the debug connection
actionbook --extension browser close

# 2. Stop the bridge — Chrome exits automatically
actionbook extension stop
```

`extension stop` works the same for both modes — it detects whether the bridge is running in isolated or standard mode and cleans up accordingly.

## Security

Extension mode includes multiple security layers to protect your browser.

### Risk Levels

| Level | Description | Example Operations |
|-------|-------------|-------------------|
| **L1** | Read-only, safe | `eval`, `snapshot`, `screenshot` |
| **L2** | Page interaction | `click`, `fill`, `select`, navigation |
| **L3** | Sensitive operations | Cookie writes on banking/payment sites |

L3 operations on sensitive domains trigger a confirmation popup in the extension — you must approve them manually.

### Token Authentication

- Sessions are authenticated with a token (`abk_` prefix)
- Tokens expire after **30 minutes** of idle time
- The bridge auto-rotates tokens; restart `serve` if pairing is lost
- Token comparison uses constant-time algorithms to prevent timing attacks

### Network Isolation

- The bridge server only listens on `127.0.0.1` (loopback)
- No external network access is possible
- Origin validation enforces exact host matching

## Troubleshooting

<AccordionGroup>
  <Accordion title="Ping failed / bridge not running">
    - Ensure `actionbook extension serve` is running
    - Confirm the extension is loaded and enabled in `chrome://extensions`
    - Check that no other process is using port 19222
    - To restart the bridge: `actionbook extension stop` then `actionbook extension serve`
  </Accordion>

  <Accordion title="Token required / pairing_required">
    - Open the extension popup and paste the latest token from the `serve` output
    - Tokens expire after 30 minutes of inactivity — restart the bridge with `actionbook extension stop` then `actionbook extension serve`
  </Accordion>

  <Accordion title="No tab attached">
    - Make sure Chrome has at least one visible, active tab
    - Run `actionbook --extension browser open <url>` first to attach a tab
    - Avoid `chrome://` pages — the debugger cannot attach to them
  </Accordion>

  <Accordion title="L3 operation blocked">
    - Sensitive operations (e.g., cookie writes on banking domains) require manual approval
    - Check the extension popup for a pending confirmation dialog
    - Approve or deny the operation from the popup
  </Accordion>

  <Accordion title="Custom port not working">
    - The extension defaults to `ws://localhost:19222`
    - Start the bridge with a matching port: `actionbook extension serve --port <PORT>`
    - Pass the port to browser commands: `--extension-port <PORT>`
  </Accordion>

  <Accordion title="GitHub rate limit on install">
    - Anonymous GitHub API allows 60 requests/hour
    - Wait a few minutes and retry, or download the `.zip` manually from [GitHub Releases](https://github.com/actionbook/actionbook/releases)
    - Unzip to a local folder and use **Load unpacked** in Chrome
  </Accordion>

  <Accordion title="Offline install">
    - Download the `actionbook-extension-v*.zip` from another machine with internet access
    - Unzip to `~/.config/actionbook/extension/`
    - Run `actionbook extension install --force` to register native messaging
  </Accordion>
</AccordionGroup>
